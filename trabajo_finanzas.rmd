---
output: pdf_document
---
```{r, echo=FALSE, fig.align = "left"}
knitr::include_graphics("logo.png")
```
\center
# Trabajo Grupal Finanzas I
## 2023-03-30
\flushleft
\
```{r, echo=FALSE, fig.align = "center"}
knitr::include_graphics("coat_of_arms.png")
```
\

* Amanda Araya Orrego
* Lucas Oliva Valverde
* Melissa Sumi Ibata
* Exequiel Valdés Zúñiga

\newpage
*En este documento se hará uso de los prefijos
SI^[k: × 1 000, M: × 1 000 000, G: × 1 000 000 000. [Wikipedia](https://en.wikipedia.org/wiki/Metric_prefix)] 
para la representación de cantidades de dinero.

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, comment = NA)

formato <- function(x) {
    format(round(x, 2), big.mark = " ", scientific = FALSE,
    decimal.mark = ",")
}
# Formato para añadir separadores de miles, coma decimal, y
# dos puntos decimales.
```

## Instrucciones: Elaborar informe de análisis financiero:
## Incluir:
## - Análisis estático comparativo (últimos dos balances de cierre DUDAS).
## - Análisis de liquidez (ratios HECHO).
## - Ratios financieros en genreral DUDAS.
## - Ratios económicos (margen, rendimiento, rentabilidad DUDAS).
## - Introducción.
## - Marco conceptual.
## - Análisis.
## - Conclusiones.

# Empresa escogida: Amazon

# Introducción

[ESCRIBIR INTRODUCCIÓN]

```{r}
library(readxl)

estado_de_resultado <- read_excel(
    "estado_de_resultados.xlsx",  range = "A1:C35")
balance <- read_excel("balance.xlsx",  range = "A1:C49")
estado_de_resultado <- estado_de_resultado[-1, ]
balance <- balance[-1, ]
# Se extrajo los datos de los archivos. Fuente: "investing.com".
```

# Capital trabajo neto

```{r}
capital_trabajo_neto_2022 <- as.numeric(balance[1,
    2]) - as.numeric(balance[21, 2])
capital_trabajo_neto_2021 <- as.numeric(balance[1,
    3]) - as.numeric(balance[21, 3])
# Fórmula: capital trabajo neto = activos corrientes - pasivos corrientes.

cat("El capital de trabajo neto fue de USD",
    formato(capital_trabajo_neto_2021),
    "M en el año 2021.\nMientras que en 2022 fue de USD",
    formato(capital_trabajo_neto_2022), "M.\nLa diferencia es de USD",
    formato(capital_trabajo_neto_2022 - capital_trabajo_neto_2021), "M.")
```

# Liquidez

```{r}
liquidez_2022 <- as.numeric(balance[1, 2]) / as.numeric(balance[21, 2])
liquidez_2021 <- as.numeric(balance[1, 3]) / as.numeric(balance[21, 3])
# Fórmula: liquidez = activos corrientes / pasivos corrientes.

cat("La liquidez del año 2021 fue de un ratio de",
    formato(liquidez_2021 * 100),
    "%.\nMientras que en el año 2022 fue de un ratio de",
    formato(liquidez_2022*100), "%.\nLa diferencia fue de",
    formato((liquidez_2022 - liquidez_2021) * 100), "%.")
```

# Ratios económicos

## Margen

```{r}

margen <- as.numeric(estado_de_resultado[4,
    2]) / as.numeric(estado_de_resultado[4, 3]) - 1

cat("El margen bruto del 2022 ha aumentado en un",
    formato(margen * 100),
    "% en comparación al año 2021.")

```

## Rendimiento

```{r}
# Rentabilidad bruta = Resultado bruto / Ingresos
# Rentabilidad operacional = Resultado operacional / Ingresos
# Rentabilidad neta = Resultado neto / Ingresos

```
## Rentabilidad

### Rentabilidad Bruta
```{r}
rentabilidad_bruta_2022 <- (as.numeric(estado_de_resultado[1,
    2]) - as.numeric(estado_de_resultado[6,
    2])) / as.numeric(estado_de_resultado[1, 2])

rentabilidad_bruta_2021 <- (as.numeric(estado_de_resultado[1,
    3]) - as.numeric(estado_de_resultado[6,
    3])) / as.numeric(estado_de_resultado[1, 3])

# (Ingresos - Total gastos de operación) / Ingresos

cat("La rentabilidad bruta del año 2021 fue de",
    formato(rentabilidad_bruta_2021 * 100),
    "%.\nMientras que en el año 2022 fue de",
    formato(rentabilidad_bruta_2022 * 100),
    "%.\nLa diferencia es de",
    formato(rentabilidad_bruta_2022 * 100 - rentabilidad_bruta_2021 * 100),
    "%.")
```
### Rentabilidad Operacional

```{r}

rentabilidad_operacional_2022 <- (as.numeric(estado_de_resultado[1,
    2]) - as.numeric(estado_de_resultado[6,
    2]) - as.numeric(estado_de_resultado[7,
    2])) / as.numeric(estado_de_resultado[1, 2])

rentabilidad_operacional_2021 <- (as.numeric(estado_de_resultado[1,
    3]) - as.numeric(estado_de_resultado[6,
    3]) - as.numeric(estado_de_resultado[7,
    3])) / as.numeric(estado_de_resultado[1, 3])

# (Ingresos - Total gastos de operación - Venta y adm. total) / Ingresos = Rentabilidad Operacional.
# (Ingresos - Total gastos de operación - Venta y adm. total) = Resultado Operacional.

cat("La rentabilidad operacional del año 2021 fue de",
    formato(rentabilidad_operacional_2021 * 100),
    "%.\nMientras que en el año 2022 fue de",
    formato(rentabilidad_operacional_2022 * 100),
    "%.\nLa diferencia es de",
    formato(rentabilidad_operacional_2022 * 100 - rentabilidad_operacional_2021 * 100),
    "%.")

```
### Rentabilidad Neta

```{r}
rentabilidad_neta_2022 <- as.numeric(estado_de_resultado[25,
    2]) / as.numeric(estado_de_resultado[1, 2])

rentabilidad_neta_2021 <- as.numeric(estado_de_resultado[25,
    3]) / as.numeric(estado_de_resultado[1, 3])

cat("La rentabilidad neta del año 2021 fue de",
    formato(rentabilidad_neta_2021 * 100),
    "%.\nMientras que en el año 2022 fue de",
    formato(rentabilidad_neta_2022 * 100),
    "%.\nLa diferencia es de",
    formato(rentabilidad_neta_2022 * 100 - rentabilidad_neta_2021 * 100), "%.")

```

Cosas que pueden ser útiles:

Relativo porcentual

efectivo y equivalente
cuentas por cobrar
inventarios
activo fijo
otros activos largo plazo
total
banco corto plazo
proveedores
banco largo plazo
capital
resultado acumulado
total


total <- "la suma de todo lol"
relativo_porcentual <- apply("", function(x) x / total)
activo_corriente <- sum()
pasivo_corriente <- sum()
capital_trabajo_neto <- activo_corriente - pasivo_corriente
liquidez <- activo_corriente / pasivo_corriente
prueba_acida <- (activo_corriente - inventarios) / pasivo_corriente
liquidez_inmediata <- efectivo y equivalente / pasivo_corriente
solvencia <- pasivos / patrimonio
endeudamiento <- (pasivos - patrimonio) / patrimonio


